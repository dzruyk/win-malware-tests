#ifndef _MYSOCKET_H_
#define _MYSOCKET_H_

#include <stdint.h>
#include <winsock2.h>

struct socket
{
	SOCKET sock;

	int is_closed;
	
	uint32_t serv_ip;
	int serv_port;
	
	uint32_t client_ip;
	int client_port;

	int sock_domain;
	int sock_type;
};


/* 
 * Init/uninit routines.
 * Socketlib_init need to call before 
 * using other socket functions
 *
 * NOTE:
 * Recommended to call Socketlib_uninit to cleanup
 * after work.
 */
bool Socketlib_init(void);
bool Socketlib_uninit(void);

void socket_init(struct socket *s);
bool socket_connect(struct socket *s);
bool socket_get_sock(struct socket *s, int *sock);
bool socket_set_ip(struct socket *s, char *serv_ip);
bool socket_set_port(struct socket *s, char *serv_port);
bool socket_send_msg(struct socket *s, void *msg, int len);
bool socket_recv_msg(struct socket *s, void *msg, int *len, int maxlen);
bool socket_recv_line(struct socket *s, void *msg, int *len, int maxlen);
bool socket_recv_all(struct socket *s, void *msg, int len);
bool socket_close(struct socket *s);

#endif
